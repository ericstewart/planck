#!/usr/bin/env planck
(ns planck.test
  (:require [planck.shell :refer [sh]]
            [planck.core :refer [exit]]))

(if (zero? (:exit (sh "ls" "build/Release/planck")))
  (let [test-results (sh "int-test/script/run-tests")]
    (if (zero? (:exit test-results))
      (println "All tests have passed")
      (do
        (println (:out test-results))
        (exit 1))))
  (println "ERROR: You must run script/build before running script/test"))
